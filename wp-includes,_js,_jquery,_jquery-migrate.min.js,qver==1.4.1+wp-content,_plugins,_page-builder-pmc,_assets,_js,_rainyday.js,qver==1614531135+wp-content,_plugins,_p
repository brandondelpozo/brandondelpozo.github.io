var mod_pagespeed_mUhmJEi5Tr = "\"undefined\"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn(\"JQMIGRATE: \"+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(g){}a._definePropertyBroken=!0,b[c]=e}a.migrateVersion=\"1.4.1\";var f={};a.migrateWarnings=[],b.console&&b.console.log&&b.console.log(\"JQMIGRATE: Migrate is installed\"+(a.migrateMute?\"\":\" with logging active\")+\", version \"+a.migrateVersion),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},\"BackCompat\"===document.compatMode&&d(\"jQuery is not compatible with Quirks Mode\");var g=a(\"<input/>\",{size:1}).attr(\"size\")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,\"attrFn\",g||{},\"jQuery.attrFn is deprecated\"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d(\"jQuery.fn.attr( props, pass ) is deprecated\"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):(\"type\"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d(\"Can't change the 'type' of an input or button in IE 6/7/8\"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||\"boolean\"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d(\"jQuery.fn.attr('\"+j+\"') might use property instead of attribute\")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||\"\").toLowerCase();return\"button\"===c?i.apply(this,arguments):(\"input\"!==c&&\"option\"!==c&&d(\"jQuery.fn.attr('value') no longer gets properties\"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||\"\").toLowerCase();return\"button\"===c?j.apply(this,arguments):(\"input\"!==c&&\"option\"!==c&&d(\"jQuery.fn.attr('value', val) no longer sets properties\"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.find,s=a.parseJSON,t=/^\\s*</,u=/\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/,v=/\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/g,w=/^([^<]*)(<[\\w\\W]+>)([^>]*)$/;a.fn.init=function(b,e,f){var g,h;return b&&\"string\"==typeof b&&!a.isPlainObject(e)&&(g=w.exec(a.trim(b)))&&g[0]&&(t.test(b)||d(\"$(html) HTML strings must start with '<' character\"),g[3]&&d(\"$(html) HTML text after last tag is ignored\"),\"#\"===g[0].charAt(0)&&(d(\"HTML string cannot start with a '#' character\"),a.error(\"JQMIGRATE: Invalid selector string (XSS)\")),e&&e.context&&e.context.nodeType&&(e=e.context),a.parseHTML)?q.call(this,a.parseHTML(g[2],e&&e.ownerDocument||e||document,!0),e,f):(h=q.apply(this,arguments),b&&b.selector!==c?(h.selector=b.selector,h.context=b.context):(h.selector=\"string\"==typeof b?b:\"\",b&&(h.context=b.nodeType?b:e||document)),h)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if(\"string\"==typeof a&&u.test(a))try{document.querySelector(a)}catch(c){a=a.replace(v,function(a,b,c,d){return\"[\"+b+c+'\"'+d+'\"]'});try{document.querySelector(a),d(\"Attribute selector with '#' must be quoted: \"+b[0]),b[0]=a}catch(e){d(\"Attribute selector with '#' was not fixed: \"+b[0])}}return r.apply(this,b)};var x;for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&(a.find[x]=r[x]);a.parseJSON=function(a){return a?s.apply(this,arguments):(d(\"jQuery.parseJSON requires a valid JSON string\"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \\/]([\\w.]+)/.exec(a)||/(webkit)[ \\/]([\\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(a)||/(msie) ([\\w.]+)/.exec(a)||a.indexOf(\"compatible\")<0&&/(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(a)||[];return{browser:b[1]||\"\",version:b[2]||\"0\"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,\"browser\",a.browser,\"jQuery.browser is deprecated\"),a.boxModel=a.support.boxModel=\"CSS1Compat\"===document.compatMode,e(a,\"boxModel\",a.boxModel,\"jQuery.boxModel is deprecated\"),e(a.support,\"boxModel\",a.support.boxModel,\"jQuery.support.boxModel is deprecated\"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){var f=a.fn.init.call(this,d,e,c);return f instanceof b?f:b(f)},b.fn.init.prototype=b.fn;var c=b(document);return d(\"jQuery.sub() is deprecated\"),b},a.fn.size=function(){return d(\"jQuery.fn.size() is deprecated; use the .length property\"),this.length};var y=!1;a.swap&&a.each([\"height\",\"width\",\"reliableMarginRight\"],function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return y=!0,a=d.apply(this,arguments),y=!1,a})}),a.swap=function(a,b,c,e){var f,g,h={};y||d(\"jQuery.swap() is undocumented and deprecated\");for(g in b)h[g]=a.style[g],a.style[g]=b[g];f=c.apply(a,e||[]);for(g in b)a.style[g]=h[g];return f},a.ajaxSetup({converters:{\"text json\":a.parseJSON}});var z=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||\"events\"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?z.apply(this,arguments):(d(\"Use of jQuery.fn.data('events') is deprecated\"),f)};var A=/\\/(java|ecma)script/i;a.clean||(a.clean=function(b,c,e,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d(\"jQuery.clean() is deprecated\");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){return!a.type||A.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,\"script\")&&i(h)||(e.appendChild(h),\"undefined\"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName(\"script\")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var B=a.event.add,C=a.event.remove,D=a.event.trigger,E=a.fn.toggle,F=a.fn.live,G=a.fn.die,H=a.fn.load,I=\"ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess\",J=new RegExp(\"\\\\b(?:\"+I+\")\\\\b\"),K=/(?:^|\\s)hover(\\.\\S+|)\\b/,L=function(b){return\"string\"!=typeof b||a.event.special.hover?b:(K.test(b)&&d(\"'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'\"),b&&b.replace(K,\"mouseenter$1 mouseleave$1\"))};a.event.props&&\"attrChange\"!==a.event.props[0]&&a.event.props.unshift(\"attrChange\",\"attrName\",\"relatedNode\",\"srcElement\"),a.event.dispatch&&e(a.event,\"handle\",a.event.dispatch,\"jQuery.event.handle is undocumented and deprecated\"),a.event.add=function(a,b,c,e,f){a!==document&&J.test(b)&&d(\"AJAX events should be attached to document: \"+b),B.call(this,a,L(b||\"\"),c,e,f)},a.event.remove=function(a,b,c,d,e){C.call(this,a,L(b)||\"\",c,d,e)},a.each([\"load\",\"unload\",\"error\"],function(b,c){a.fn[c]=function(){var a=Array.prototype.slice.call(arguments,0);return\"load\"===c&&\"string\"==typeof a[0]?H.apply(this,a):(d(\"jQuery.fn.\"+c+\"() is deprecated\"),a.splice(0,0,c),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this))}}),a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return E.apply(this,arguments);d(\"jQuery.fn.toggle(handler, handler...) is deprecated\");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,\"lastToggle\"+b.guid)||0)%g;return a._data(this,\"lastToggle\"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d(\"jQuery.fn.live() is deprecated\"),F?F.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d(\"jQuery.fn.die() is deprecated\"),G?G.apply(this,arguments):(a(this.context).off(b,this.selector||\"**\",c),this)},a.event.trigger=function(a,b,c,e){return c||J.test(a)||d(\"Global events are undocumented and deprecated\"),D.call(this,a,b,c||document,e)},a.each(I.split(\"|\"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+\".\"+a.guid,function(){a.event.trigger(c,Array.prototype.slice.call(arguments,1),b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+\".\"+a._data(this,c)),!1}}}),a.event.special.ready={setup:function(){this===document&&d(\"'ready' event is deprecated\")}};var M=a.fn.andSelf||a.fn.addBack,N=a.fn.find;if(a.fn.andSelf=function(){return d(\"jQuery.fn.andSelf() replaced by jQuery.fn.addBack()\"),M.apply(this,arguments)},a.fn.find=function(a){var b=N.apply(this,arguments);return b.context=this.context,b.selector=this.selector?this.selector+\" \"+a:a,b},a.Callbacks){var O=a.Deferred,P=[[\"resolve\",\"done\",a.Callbacks(\"once memory\"),a.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",a.Callbacks(\"once memory\"),a.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",a.Callbacks(\"memory\"),a.Callbacks(\"memory\")]];a.Deferred=function(b){var c=O(),e=c.promise();return c.pipe=e.pipe=function(){var b=arguments;return d(\"deferred.pipe() is deprecated\"),a.Deferred(function(d){a.each(P,function(f,g){var h=a.isFunction(b[f])&&b[f];c[g[1]](function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(d.resolve).fail(d.reject).progress(d.notify):d[g[0]+\"With\"](this===e?d.promise():this,h?[b]:arguments)})}),b=null}).promise()},c.isResolved=function(){return d(\"deferred.isResolved is deprecated\"),\"resolved\"===c.state()},c.isRejected=function(){return d(\"deferred.isRejected is deprecated\"),\"rejected\"===c.state()},b&&b.call(c,c),c}}}(jQuery,window);";
var mod_pagespeed_vNFG$NG0vT = "function RainyDay(options,canvas){if(this===window){return new RainyDay(options);}this.img=options.image;var defaults={opacity:1,blur:10,crop:[0,0,this.img.naturalWidth,this.img.naturalHeight],enableSizeChange:true,parentElement:document.getElementsByTagName('body')[0],fps:30,fillStyle:'#8ED6FF',enableCollisions:true,gravityThreshold:3,gravityAngle:Math.PI/2,gravityAngleVariance:0,reflectionScaledownFactor:5,reflectionDropMappingWidth:200,reflectionDropMappingHeight:200,width:this.img.clientWidth,height:this.img.clientHeight,position:'absolute',top:0,left:0};for(var option in defaults){if(typeof options[option]==='undefined'){options[option]=defaults[option];}}this.options=options;this.drops=[];this.canvas=canvas||this.prepareCanvas();this.prepareBackground(this.canvas.width,this.canvas.height);this.prepareGlass();this.reflection=this.REFLECTION_MINIATURE;this.trail=this.TRAIL_DROPS;this.gravity=this.GRAVITY_NON_LINEAR;this.collision=this.COLLISION_SIMPLE;this.setRequestAnimFrame();}RainyDay.prototype.prepareCanvas=function(){var canvas=document.createElement('canvas');canvas.style.position=this.options.position;canvas.style.top=this.options.top;canvas.style.left=this.options.left;canvas.width=this.options.width;canvas.height=this.options.height;this.options.parentElement.appendChild(canvas);if(this.enableSizeChange){this.setResizeHandler();}return canvas;};RainyDay.prototype.setResizeHandler=function(){if(window.onresize!==null){window.setInterval(this.checkSize.bind(this),100);}else{window.onresize=this.checkSize.bind(this);window.onorientationchange=this.checkSize.bind(this);}};RainyDay.prototype.checkSize=function(){var clientWidth=this.img.clientWidth;var clientHeight=this.img.clientHeight;var clientOffsetLeft=this.img.offsetLeft;var clientOffsetTop=this.img.offsetTop;var canvasWidth=this.canvas.width;var canvasHeight=this.canvas.height;var canvasOffsetLeft=this.canvas.offsetLeft;var canvasOffsetTop=this.canvas.offsetTop;if(canvasWidth!==clientWidth||canvasHeight!==clientHeight){this.canvas.width=this.canvas.width;this.canvas.height=this.canvas.height;this.prepareBackground(this.canvas.width,this.canvas.height);this.glass.width=this.canvas.width;this.glass.height=this.canvas.height;this.prepareReflections();}if(canvasOffsetLeft!==clientOffsetLeft||canvasOffsetTop!==clientOffsetTop){this.canvas.offsetLeft=clientOffsetLeft;this.canvas.offsetTop=clientOffsetTop;}};RainyDay.prototype.animateDrops=function(){if(this.addDropCallback){this.addDropCallback();}var dropsClone=this.drops.slice();var newDrops=[];for(var i=0;i<dropsClone.length;++i){if(dropsClone[i].animate()){newDrops.push(dropsClone[i]);}}this.drops=newDrops;window.requestAnimFrame(this.animateDrops.bind(this));};RainyDay.prototype.setRequestAnimFrame=function(){var fps=this.options.fps;window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/fps);};})();};RainyDay.prototype.prepareReflections=function(){this.reflected=document.createElement('canvas');this.reflected.width=this.canvas.width/this.options.reflectionScaledownFactor;this.reflected.height=this.canvas.height/this.options.reflectionScaledownFactor;var ctx=this.reflected.getContext('2d');ctx.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.reflected.width,this.reflected.height);};RainyDay.prototype.prepareGlass=function(){this.glass=document.createElement('canvas');this.glass.width=this.canvas.width;this.glass.height=this.canvas.height;this.context=this.glass.getContext('2d');};RainyDay.prototype.rain=function(presets,speed){if(this.reflection!==this.REFLECTION_NONE){this.prepareReflections();}this.animateDrops();this.presets=presets;this.PRIVATE_GRAVITY_FORCE_FACTOR_Y=(this.options.fps*0.001)/25;this.PRIVATE_GRAVITY_FORCE_FACTOR_X=((Math.PI/2)-this.options.gravityAngle)*(this.options.fps*0.001)/50;if(this.options.enableCollisions){var maxDropRadius=0;for(var i=0;i<presets.length;i++){if(presets[i][0]+presets[i][1]>maxDropRadius){maxDropRadius=Math.floor(presets[i][0]+presets[i][1]);}}if(maxDropRadius>0){var mwi=Math.ceil(this.canvas.width/maxDropRadius);var mhi=Math.ceil(this.canvas.height/maxDropRadius);this.matrix=new CollisionMatrix(mwi,mhi,maxDropRadius);}else{this.options.enableCollisions=false;}}for(var i=0;i<presets.length;i++){if(!presets[i][3]){presets[i][3]=-1;}}var lastExecutionTime=0;this.addDropCallback=function(){var timestamp=new Date().getTime();if(timestamp-lastExecutionTime<speed){return;}lastExecutionTime=timestamp;var context=this.canvas.getContext('2d');context.clearRect(0,0,this.canvas.width,this.canvas.height);context.drawImage(this.background,0,0,this.canvas.width,this.canvas.height);var preset;for(var i=0;i<presets.length;i++){if(presets[i][2]>1||presets[i][3]===-1){if(presets[i][3]!==0){presets[i][3]--;for(var y=0;y<presets[i][2];++y){this.putDrop(new Drop(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,presets[i][0],presets[i][1]));}}}else if(Math.random()<presets[i][2]){preset=presets[i];break;}}if(preset){this.putDrop(new Drop(this,Math.random()*this.canvas.width,Math.random()*this.canvas.height,preset[0],preset[1]));}context.save();context.globalAlpha=this.opacity;context.drawImage(this.glass,0,0,this.canvas.width,this.canvas.height);context.restore();}.bind(this);};RainyDay.prototype.putDrop=function(drop){drop.draw();if(this.gravity&&drop.r>this.options.gravityThreshold){if(this.options.enableCollisions){this.matrix.update(drop);}this.drops.push(drop);}};RainyDay.prototype.clearDrop=function(drop,force){var result=drop.clear(force);if(result){var index=this.drops.indexOf(drop);if(index>=0){this.drops.splice(index,1);}}return result;};function Drop(rainyday,centerX,centerY,min,base){this.x=Math.floor(centerX);this.y=Math.floor(centerY);this.r=(Math.random()*base)+min;this.rainyday=rainyday;this.context=rainyday.context;this.reflection=rainyday.reflected;}Drop.prototype.draw=function(){this.context.save();this.context.beginPath();var orgR=this.r;this.r=0.95*this.r;if(this.r<3){this.context.arc(this.x,this.y,this.r,0,Math.PI*2,true);this.context.closePath();}else if(this.colliding||this.yspeed>2){if(this.colliding){var collider=this.colliding;this.r=1.001*(this.r>collider.r?this.r:collider.r);this.x+=(collider.x-this.x);this.colliding=null;}var yr=1+0.1*this.yspeed;this.context.moveTo(this.x-this.r/yr,this.y);this.context.bezierCurveTo(this.x-this.r,this.y-this.r*2,this.x+this.r,this.y-this.r*2,this.x+this.r/yr,this.y);this.context.bezierCurveTo(this.x+this.r,this.y+yr*this.r,this.x-this.r,this.y+yr*this.r,this.x-this.r/yr,this.y);}else{this.context.arc(this.x,this.y,this.r*0.9,0,Math.PI*2,true);this.context.closePath();}this.context.clip();this.r=orgR;if(this.rainyday.reflection){this.rainyday.reflection(this);}this.context.restore();};Drop.prototype.clear=function(force){this.context.clearRect(this.x-this.r-1,this.y-this.r-2,2*this.r+2,2*this.r+2);if(force){this.terminate=true;return true;}if((this.y-this.r>this.rainyday.h)||(this.x-this.r>this.rainyday.w)||(this.x+this.r<0)){return true;}return false;};Drop.prototype.animate=function(){if(this.terminate){return false;}var stopped=this.rainyday.gravity(this);if(!stopped&&this.rainyday.trail){this.rainyday.trail(this);}if(this.rainyday.options.enableCollisions){var collisions=this.rainyday.matrix.update(this,stopped);if(collisions){this.rainyday.collision(this,collisions);}}return!stopped||this.terminate;};RainyDay.prototype.TRAIL_NONE=function(){};RainyDay.prototype.TRAIL_DROPS=function(drop){if(!drop.trailY||drop.y-drop.trailY>=Math.random()*100*drop.r){drop.trailY=drop.y;this.putDrop(new Drop(this,drop.x+(Math.random()*2-1)*Math.random(),drop.y-drop.r-5,Math.ceil(drop.r/5),0));}};RainyDay.prototype.TRAIL_SMUDGE=function(drop){var y=drop.y-drop.r-3;var x=drop.x-drop.r/2+(Math.random()*2);if(y<0||x<0){return;}this.context.drawImage(this.clearbackground,x,y,drop.r,2,x,y,drop.r,2);};RainyDay.prototype.GRAVITY_NONE=function(){return true;};RainyDay.prototype.GRAVITY_LINEAR=function(drop){if(this.clearDrop(drop)){return true;}if(drop.yspeed){drop.yspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(drop.r);drop.xspeed+=this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(drop.r);}else{drop.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y;drop.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X;}drop.y+=drop.yspeed;drop.draw();return false;};RainyDay.prototype.GRAVITY_NON_LINEAR=function(drop){if(this.clearDrop(drop)){return true;}if(drop.collided){drop.collided=false;drop.seed=Math.floor(drop.r*Math.random()*this.options.fps);drop.skipping=false;drop.slowing=false;}else if(!drop.seed||drop.seed<0){drop.seed=Math.floor(drop.r*Math.random()*this.options.fps);drop.skipping=drop.skipping===false?true:false;drop.slowing=true;}drop.seed--;if(drop.yspeed){if(drop.slowing){drop.yspeed/=1.1;drop.xspeed/=1.1;if(drop.yspeed<this.PRIVATE_GRAVITY_FORCE_FACTOR_Y){drop.slowing=false;}}else if(drop.skipping){drop.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y;drop.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X;}else{drop.yspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_Y*Math.floor(drop.r);drop.xspeed+=1*this.PRIVATE_GRAVITY_FORCE_FACTOR_X*Math.floor(drop.r);}}else{drop.yspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_Y;drop.xspeed=this.PRIVATE_GRAVITY_FORCE_FACTOR_X;}if(this.options.gravityAngleVariance!==0){drop.xspeed+=((Math.random()*2-1)*drop.yspeed*this.options.gravityAngleVariance);}drop.y+=drop.yspeed;drop.x+=drop.xspeed;drop.draw();return false;};RainyDay.prototype.positiveMin=function(val1,val2){var result=0;if(val1<val2){if(val1<=0){result=val2;}else{result=val1;}}else{if(val2<=0){result=val1;}else{result=val2;}}return result<=0?1:result;};RainyDay.prototype.REFLECTION_NONE=function(){this.context.fillStyle=this.options.fillStyle;this.context.fill();};RainyDay.prototype.REFLECTION_MINIATURE=function(drop){var sx=Math.max((drop.x-this.options.reflectionDropMappingWidth)/this.options.reflectionScaledownFactor,0);var sy=Math.max((drop.y-this.options.reflectionDropMappingHeight)/this.options.reflectionScaledownFactor,0);var sw=this.positiveMin(this.options.reflectionDropMappingWidth*2/this.options.reflectionScaledownFactor,this.reflected.width-sx);var sh=this.positiveMin(this.options.reflectionDropMappingHeight*2/this.options.reflectionScaledownFactor,this.reflected.height-sy);var dx=Math.max(drop.x-1.1*drop.r,0);var dy=Math.max(drop.y-1.1*drop.r,0);this.context.drawImage(this.reflected,sx,sy,sw,sh,dx,dy,drop.r*2,drop.r*2);};RainyDay.prototype.COLLISION_SIMPLE=function(drop,collisions){var item=collisions;var drop2;while(item!=null){var p=item.drop;if(Math.sqrt(Math.pow(drop.x-p.x,2)+Math.pow(drop.y-p.y,2))<(drop.r+p.r)){drop2=p;break;}item=item.next;}if(!drop2){return;}var higher,lower;if(drop.y>drop2.y){higher=drop;lower=drop2;}else{higher=drop2;lower=drop;}this.clearDrop(lower);this.clearDrop(higher,true);this.matrix.remove(higher);lower.draw();lower.colliding=higher;lower.collided=true;};RainyDay.prototype.prepareBackground=function(){this.background=document.createElement('canvas');this.background.width=this.canvas.width;this.background.height=this.canvas.height;this.clearbackground=document.createElement('canvas');this.clearbackground.width=this.canvas.width;this.clearbackground.height=this.canvas.height;var context=this.background.getContext('2d');context.clearRect(0,0,this.canvas.width,this.canvas.height);context.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height);context=this.clearbackground.getContext('2d');context.clearRect(0,0,this.canvas.width,this.canvas.height);context.drawImage(this.img,this.options.crop[0],this.options.crop[1],this.options.crop[2],this.options.crop[3],0,0,this.canvas.width,this.canvas.height);if(!isNaN(this.options.blur)&&this.options.blur>=1){this.stackBlurCanvasRGB(this.canvas.width,this.canvas.height,this.options.blur);}};RainyDay.prototype.stackBlurCanvasRGB=function(width,height,radius){var shgTable=[[0,9],[1,11],[2,12],[3,13],[5,14],[7,15],[11,16],[15,17],[22,18],[31,19],[45,20],[63,21],[90,22],[127,23],[181,24]];var mulTable=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];radius|=0;var context=this.background.getContext('2d');var imageData=context.getImageData(0,0,width,height);var pixels=imageData.data;var x,y,i,p,yp,yi,yw,rSum,gSum,bSum,rOutSum,gOutSum,bOutSum,rInSum,gInSum,bInSum,pr,pg,pb,rbs;var radiusPlus1=radius+1;var sumFactor=radiusPlus1*(radiusPlus1+1)/2;var stackStart=new BlurStack();var stackEnd=new BlurStack();var stack=stackStart;for(i=1;i<2*radius+1;i++){stack=stack.next=new BlurStack();if(i===radiusPlus1){stackEnd=stack;}}stack.next=stackStart;var stackIn=null;var stackOut=null;yw=yi=0;var mulSum=mulTable[radius];var shgSum;for(var ssi=0;ssi<shgTable.length;++ssi){if(radius<=shgTable[ssi][0]){shgSum=shgTable[ssi-1][1];break;}}for(y=0;y<height;y++){rInSum=gInSum=bInSum=rSum=gSum=bSum=0;rOutSum=radiusPlus1*(pr=pixels[yi]);gOutSum=radiusPlus1*(pg=pixels[yi+1]);bOutSum=radiusPlus1*(pb=pixels[yi+2]);rSum+=sumFactor*pr;gSum+=sumFactor*pg;bSum+=sumFactor*pb;stack=stackStart;for(i=0;i<radiusPlus1;i++){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}for(i=1;i<radiusPlus1;i++){p=yi+((width-1<i?width-1:i)<<2);rSum+=(stack.r=(pr=pixels[p]))*(rbs=radiusPlus1-i);gSum+=(stack.g=(pg=pixels[p+1]))*rbs;bSum+=(stack.b=(pb=pixels[p+2]))*rbs;rInSum+=pr;gInSum+=pg;bInSum+=pb;stack=stack.next;}stackIn=stackStart;stackOut=stackEnd;for(x=0;x<width;x++){pixels[yi]=(rSum*mulSum)>>shgSum;pixels[yi+1]=(gSum*mulSum)>>shgSum;pixels[yi+2]=(bSum*mulSum)>>shgSum;rSum-=rOutSum;gSum-=gOutSum;bSum-=bOutSum;rOutSum-=stackIn.r;gOutSum-=stackIn.g;bOutSum-=stackIn.b;p=(yw+((p=x+radius+1)<(width-1)?p:(width-1)))<<2;rInSum+=(stackIn.r=pixels[p]);gInSum+=(stackIn.g=pixels[p+1]);bInSum+=(stackIn.b=pixels[p+2]);rSum+=rInSum;gSum+=gInSum;bSum+=bInSum;stackIn=stackIn.next;rOutSum+=(pr=stackOut.r);gOutSum+=(pg=stackOut.g);bOutSum+=(pb=stackOut.b);rInSum-=pr;gInSum-=pg;bInSum-=pb;stackOut=stackOut.next;yi+=4;}yw+=width;}for(x=0;x<width;x++){gInSum=bInSum=rInSum=gSum=bSum=rSum=0;yi=x<<2;rOutSum=radiusPlus1*(pr=pixels[yi]);gOutSum=radiusPlus1*(pg=pixels[yi+1]);bOutSum=radiusPlus1*(pb=pixels[yi+2]);rSum+=sumFactor*pr;gSum+=sumFactor*pg;bSum+=sumFactor*pb;stack=stackStart;for(i=0;i<radiusPlus1;i++){stack.r=pr;stack.g=pg;stack.b=pb;stack=stack.next;}yp=width;for(i=1;i<radiusPlus1;i++){yi=(yp+x)<<2;rSum+=(stack.r=(pr=pixels[yi]))*(rbs=radiusPlus1-i);gSum+=(stack.g=(pg=pixels[yi+1]))*rbs;bSum+=(stack.b=(pb=pixels[yi+2]))*rbs;rInSum+=pr;gInSum+=pg;bInSum+=pb;stack=stack.next;if(i<(height-1)){yp+=width;}}yi=x;stackIn=stackStart;stackOut=stackEnd;for(y=0;y<height;y++){p=yi<<2;pixels[p]=(rSum*mulSum)>>shgSum;pixels[p+1]=(gSum*mulSum)>>shgSum;pixels[p+2]=(bSum*mulSum)>>shgSum;rSum-=rOutSum;gSum-=gOutSum;bSum-=bOutSum;rOutSum-=stackIn.r;gOutSum-=stackIn.g;bOutSum-=stackIn.b;p=(x+(((p=y+radiusPlus1)<(height-1)?p:(height-1))*width))<<2;rSum+=(rInSum+=(stackIn.r=pixels[p]));gSum+=(gInSum+=(stackIn.g=pixels[p+1]));bSum+=(bInSum+=(stackIn.b=pixels[p+2]));stackIn=stackIn.next;rOutSum+=(pr=stackOut.r);gOutSum+=(pg=stackOut.g);bOutSum+=(pb=stackOut.b);rInSum-=pr;gInSum-=pg;bInSum-=pb;stackOut=stackOut.next;yi+=width;}}context.putImageData(imageData,0,0);};function BlurStack(){this.r=0;this.g=0;this.b=0;this.next=null;}function CollisionMatrix(x,y,r){this.resolution=r;this.xc=x;this.yc=y;this.matrix=new Array(x);for(var i=0;i<=(x+5);i++){this.matrix[i]=new Array(y);for(var j=0;j<=(y+5);++j){this.matrix[i][j]=new DropItem(null);}}}CollisionMatrix.prototype.update=function(drop,forceDelete){if(drop.gid){if(!this.matrix[drop.gmx]||!this.matrix[drop.gmx][drop.gmy]){return null;}this.matrix[drop.gmx][drop.gmy].remove(drop);if(forceDelete){return null;}drop.gmx=Math.floor(drop.x/this.resolution);drop.gmy=Math.floor(drop.y/this.resolution);if(!this.matrix[drop.gmx]||!this.matrix[drop.gmx][drop.gmy]){return null;}this.matrix[drop.gmx][drop.gmy].add(drop);var collisions=this.collisions(drop);if(collisions&&collisions.next!=null){return collisions.next;}}else{drop.gid=Math.random().toString(36).substr(2,9);drop.gmx=Math.floor(drop.x/this.resolution);drop.gmy=Math.floor(drop.y/this.resolution);if(!this.matrix[drop.gmx]||!this.matrix[drop.gmx][drop.gmy]){return null;}this.matrix[drop.gmx][drop.gmy].add(drop);}return null;};CollisionMatrix.prototype.collisions=function(drop){var item=new DropItem(null);var first=item;item=this.addAll(item,drop.gmx-1,drop.gmy+1);item=this.addAll(item,drop.gmx,drop.gmy+1);item=this.addAll(item,drop.gmx+1,drop.gmy+1);return first;};CollisionMatrix.prototype.addAll=function(to,x,y){if(x>0&&y>0&&x<this.xc&&y<this.yc){var items=this.matrix[x][y];while(items.next!=null){items=items.next;to.next=new DropItem(items.drop);to=to.next;}}return to;};CollisionMatrix.prototype.remove=function(drop){this.matrix[drop.gmx][drop.gmy].remove(drop);};function DropItem(drop){this.drop=drop;this.next=null;}DropItem.prototype.add=function(drop){var item=this;while(item.next!=null){item=item.next;}item.next=new DropItem(drop);};DropItem.prototype.remove=function(drop){var item=this;var prevItem=null;while(item.next!=null){prevItem=item;item=item.next;if(item.drop.gid===drop.gid){prevItem.next=item.next;}}};";
var mod_pagespeed_PqvbraR9IL = "(function(){var Circles=window.Circles=function(options){var elId=options.id;this._el=document.getElementById(elId);if(this._el===null)return;this._radius=options.radius;this._percentage=options.percentage;this._text=options.text;this._number=options.number||this._percentage;this._strokeWidth=options.width||10;this._colors=options.colors||['#EEE','#F00'];this._interval=16;this._textWrpClass='circles-text-wrp';this._textClass='circles-text';this._numberClass='circles-number';this._confirmAnimation(options.duration);var endAngleRad=Math.PI/180*270;this._start=-Math.PI/180*90;this._startPrecise=this._precise(this._start);this._circ=endAngleRad-this._start;this.generate();if(this._canAnimate)this._animate();};Circles.prototype={VERSION:'0.0.4',generate:function(radius){if(radius){this._radius=radius;this._canAnimate=false;}this._svgSize=this._radius*2;this._radiusAdjusted=this._radius-(this._strokeWidth/2);this._el.innerHTML=this._wrap(this._generateSvg()+this._generateText());},_confirmAnimation:function(duration){if(duration===null){this._canAnimate=false;return;}duration=duration||500;var step=duration/this._interval,pathFactor=this._percentage/step,numberFactor=this._number/step;if(this._percentage<=(1+pathFactor)){this._canAnimate=false;}else{this._canAnimate=true;this._pathFactor=pathFactor;this._numberFactor=numberFactor;}},_animate:function(){var i=1,self=this,path=this._el.getElementsByTagName('path')[1],numberEl=this._getNumberElement(),isInt=this._number%1===0,requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,self._interval);},animate=function(){var percentage=self._pathFactor*i,nextPercentage=self._pathFactor*(i+1),number=self._numberFactor*i,canContinue=true;if(isInt){number=Math.round(number);}if(nextPercentage>self._percentage){percentage=self._percentage;number=self._number;canContinue=false;}if(percentage>self._percentage)return;path.setAttribute('d',self._calculatePath(percentage,true));numberEl.innerHTML=self._calculateNumber(number);i++;if(canContinue)requestAnimFrame(animate);};requestAnimFrame(animate);},_getNumberElement:function(){var divs=this._el.getElementsByTagName('span');for(var i=0,l=divs.length;i<l;i++){if(divs[i].className===this._numberClass)return divs[i];}},_wrap:function(content){return'<div class=\"circles-wrp\" style=\"position:relative; display:inline-block;\">'+content+'</div>';},_generateText:function(){var html='<div class=\"'+this._textWrpClass+'\" style=\"position:absolute; top:0; left:0; text-align:center; width:100%;'+' font-size:'+this._radius*.7+'px; height:'+this._svgSize+'px; line-height:'+this._svgSize+'px;\">'+this._calculateNumber(this._canAnimate?0:this._number);if(this._text){html+='<span class=\"'+this._textClass+'\">'+this._text+'</span>';}html+='</div>';return html;},_calculateNumber:function(number){var parts=(number+'').split('.'),html='<span class=\"'+this._numberClass+'\">'+parts[0];if(parts.length>1){html+='.<span style=\"font-size:.4em\">'+parts[1].substring(0,2)+'</span>';}return html+'</span>';},_generateSvg:function(){return'<svg width=\"'+this._svgSize+'\" height=\"'+this._svgSize+'\">'+this._generatePath(100,false,this._colors[0])+this._generatePath(this._canAnimate?1:this._percentage,true,this._colors[1])+'</svg>';},_generatePath:function(percentage,open,color){return'<path fill=\"transparent\" stroke=\"'+color+'\" stroke-width=\"'+this._strokeWidth+'\" d=\"'+this._calculatePath(percentage,open)+'\"/>';},_calculatePath:function(percentage,open){var end=this._start+((percentage/100)*this._circ),endPrecise=this._precise(end);return this._arc(endPrecise,open);},_arc:function(end,open){var endAdjusted=end-0.001,longArc=end-this._startPrecise<Math.PI?0:1;return['M',this._radius+this._radiusAdjusted*Math.cos(this._startPrecise),this._radius+this._radiusAdjusted*Math.sin(this._startPrecise),'A',this._radiusAdjusted,this._radiusAdjusted,0,longArc,1,this._radius+this._radiusAdjusted*Math.cos(endAdjusted),this._radius+this._radiusAdjusted*Math.sin(endAdjusted),open?'':'Z'].join(' ');},_precise:function(value){return Math.round(value*1000)/1000;}};Circles.create=function(options){return new Circles(options);};})();";
